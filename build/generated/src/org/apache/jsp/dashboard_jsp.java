package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import dao.Users;

public final class dashboard_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write('\n');

    Users user = (Users) session.getAttribute("user");
    if (user == null) {
        request.getRequestDispatcher("/logIn.jsp").forward(request, response);
    }

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html lang=\"en\">\n");
      out.write("\n");
      out.write("    <head>\n");
      out.write("        <meta charset=\"utf-8\">\n");
      out.write("        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n");
      out.write("        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n");
      out.write("        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n");
      out.write("        <link rel=\"icon\" href=\"https://htmljstemplates.com/static_files/images/favicon.png\" />\n");
      out.write("\n");
      out.write("        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n");
      out.write("        <link rel=\"stylesheet\" href=\"https://unpkg.com/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\n");
      out.write("        <link rel=\"stylesheet\" href=\"https://unpkg.com/bs-brain@2.0.4/components/navbars/navbar-1/assets/css/navbar-1.css\">\n");
      out.write("        <link rel=\"stylesheet\" href=\"https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css\">\n");
      out.write("        <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\">\n");
      out.write("\n");
      out.write("        <style>\n");
      out.write("            a {\n");
      out.write("                font-family: 'Darker Grotesque', sans-serif;\n");
      out.write("                font-size: 20px;\n");
      out.write("                text-decoration: none;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .lavish {\n");
      out.write("                font-family: 'Lavishly Yours', cursive;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .customSubMenuHolder:hover>.customSubMenu {\n");
      out.write("                display: block\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .customSubMenu {\n");
      out.write("                display: none;\n");
      out.write("                box-shadow: 2px 8px 12px rgba(0, 0, 0, 0.5);\n");
      out.write("                position: absolute;\n");
      out.write("                width: 100%;\n");
      out.write("                left: 0;\n");
      out.write("                background: #00354b;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            img {\n");
      out.write("                width: 100%;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .cart-link,\n");
      out.write("            .login-link {\n");
      out.write("                font-size: 1.5rem;\n");
      out.write("                /* Adjust font size as needed */\n");
      out.write("                padding: 0.5rem;\n");
      out.write("                /* Adjust padding as needed */\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .cart-link svg,\n");
      out.write("            .login-link svg {\n");
      out.write("                width: 24px;\n");
      out.write("                /* Adjust SVG width as needed */\n");
      out.write("                height: 24px;\n");
      out.write("                /* Adjust SVG height as needed */\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .cart-link {\n");
      out.write("                font-size: 1.5rem;\n");
      out.write("                padding: 0.5rem;\n");
      out.write("                border: 1px solid #0f83589c;\n");
      out.write("                border-radius: 23px;\n");
      out.write("                transition: none;\n");
      out.write("                display: inline-flex;\n");
      out.write("                align-items: center;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .cart-link svg {\n");
      out.write("                width: 24px;\n");
      out.write("                /* Adjust SVG width as needed */\n");
      out.write("                height: 24px;\n");
      out.write("                /* Adjust SVG height as needed */\n");
      out.write("                transition: all 0.3s ease;\n");
      out.write("                /* Smooth transition for hover effect */\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .cart-link:hover {\n");
      out.write("                fill: #fff;\n");
      out.write("                background: linear-gradient(45deg, yellow, green);\n");
      out.write("                /* Gradient background on hover */\n");
      out.write("                border: none;\n");
      out.write("                /* Make border transparent to show gradient properly */\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .cart-link:hover svg {\n");
      out.write("                /*  fill: #fff; Change SVG color on hover */\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            /* Optional: Add similar styles for the login-link if needed */\n");
      out.write("            .login-link {\n");
      out.write("                margin-right: 60px;\n");
      out.write("                border: 1px solid #0f83589c;\n");
      out.write("                border-radius: 23px;\n");
      out.write("                font-size: 1.5rem;\n");
      out.write("                /* Adjust font size as needed */\n");
      out.write("                padding: 0.5rem;\n");
      out.write("                /* Adjust padding as needed */\n");
      out.write("                border-radius: 23px;\n");
      out.write("                /* Optional: rounded corners */\n");
      out.write("                transition: all 0.3s ease;\n");
      out.write("                /* Smooth transition for hover effect */\n");
      out.write("                display: inline-flex;\n");
      out.write("                align-items: center;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .login-link svg {\n");
      out.write("                width: 24px;\n");
      out.write("                /* Adjust SVG width as needed */\n");
      out.write("                height: 24px;\n");
      out.write("                /* Adjust SVG height as needed */\n");
      out.write("                transition: all 0.3s ease;\n");
      out.write("                /* Smooth transition for hover effect */\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .login-link:hover {\n");
      out.write("                fill: #fff;\n");
      out.write("                background: linear-gradient(45deg, red, #ff9999);\n");
      out.write("                /* Gradient background on hover */\n");
      out.write("                border: none;\n");
      out.write("                /* Make border transparent to show gradient properly */\n");
      out.write("            }\n");
      out.write("            .edit {\n");
      out.write("                color: green; /* Set the color to green for the edit icon */\n");
      out.write("                cursor: pointer; /* Change cursor to pointer on hover */\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .delete {\n");
      out.write("                color: red; /* Set the color to red for the delete icon */\n");
      out.write("                cursor: pointer; /* Change cursor to pointer on hover */\n");
      out.write("            }\n");
      out.write("            .act{\n");
      out.write("                display: flex;\n");
      out.write("                justify-content: space-around;\n");
      out.write("            }\n");
      out.write("        </style>\n");
      out.write("\n");
      out.write("        <title>Dashboard</title>\n");
      out.write("\n");
      out.write("    </head>\n");
      out.write("\n");
      out.write("    <body>\n");
      out.write("        <nav class=\"navbar navbar-expand-lg navbar-light bg-white border-bottom px-2\">\n");
      out.write("            <a class=\"navbar-brand\" href=\"#\" style=\"min-width:180px\">\n");
      out.write("                <img style=\"height:114px\" src=\"assets/images/logo.png\" alt=\"new logo\" />\n");
      out.write("            </a>\n");
      out.write("            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNavDropdown\" aria-controls=\"navbarNavDropdown\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n");
      out.write("                <span class=\"navbar-toggler-icon\"></span>\n");
      out.write("            </button>\n");
      out.write("\n");
      out.write("            <div class=\"collapse navbar-collapse\" id=\"navbarNavDropdown\">\n");
      out.write("                <ul class=\"navbar-nav ms-auto d-none d-lg-inline-flex\">\n");
      out.write("                    <li class=\"nav-item mx-2\">\n");
      out.write("                        <a class=\"nav-link cart-link\" href=\"#\">\n");
      out.write("                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-cart\" viewBox=\"0 0 16 16\">\n");
      out.write("                            <path d=\"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\" />\n");
      out.write("                            </svg>\n");
      out.write("                            <span data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal2\" class=\"ms-1 align-middle\">Add New Book</span>\n");
      out.write("                        </a>\n");
      out.write("                    </li>\n");
      out.write("                    <li class=\"nav-item mx-2 dropdown\">\n");
      out.write("                        <a class=\"nav-link login-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n");
      out.write("                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-person-circle\" viewBox=\"0 0 16 16\">\n");
      out.write("                            <path d=\"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\" />\n");
      out.write("                            <path fill-rule=\"evenodd\" d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z\" />\n");
      out.write("                            </svg>\n");
      out.write("                            <span class=\"ms-1 align-texttop\">");
      out.print(user.getUsername());
      out.write("</span>\n");
      out.write("                        </a>\n");
      out.write("                        <ul class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n");
      out.write("                            <li><a class=\"dropdown-item\" href=\"KillSession\">Log out</a></li>\n");
      out.write("                        </ul>\n");
      out.write("                    </li>\n");
      out.write("                </ul>\n");
      out.write("            </div>\n");
      out.write("        </nav>\n");
      out.write("\n");
      out.write("        <div class=\"container-fluid p-4\">\n");
      out.write("            <div class=\"row\">\n");
      out.write("                <div class=\"col\">\n");
      out.write("                    <div class=\"row header\" style=\"text-align:center;color:green\">\n");
      out.write("                        <h3>CRUD Operations On Books Table</h3>\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"table-responsive\">\n");
      out.write("                        <table id=\"example\" class=\"table table-striped table-bordered\" style=\"width:100%\">\n");
      out.write("                            <thead>\n");
      out.write("                                <tr>\n");
      out.write("                                    <th>Book ID</th>\n");
      out.write("                                    <th>Book title</th>\n");
      out.write("                                    <th>Author</th>\n");
      out.write("                                    <th>Book Description</th>\n");
      out.write("                                    <th>Price</th>\n");
      out.write("                                    <th>Published Date</th>\n");
      out.write("                                    <th>Action</th>\n");
      out.write("                                </tr>\n");
      out.write("                            </thead>\n");
      out.write("                            <tbody>\n");
      out.write("\n");
      out.write("                            </tbody>\n");
      out.write("                        </table>\n");
      out.write("\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("        <!-- Modal for Update  -->\n");
      out.write("        <div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n");
      out.write("            <div class=\"modal-dialog\">\n");
      out.write("                <div class=\"modal-content\">\n");
      out.write("                    <div class=\"modal-header\">\n");
      out.write("                        <h5 class=\"modal-title\" id=\"exampleModalLabel\">Modify Book Info</h5>\n");
      out.write("                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"modal-body\">\n");
      out.write("                        <form id=\"updateForm\">\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <input readonly type=\"text\" name=\"bookID\" id=\"bookID\" class=\"form-control\"/>\n");
      out.write("                                <label class=\"form-label\" for=\"bookID\">Book ID</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <input type=\"text\" name=\"bookTitle\" id=\"bookTitle\" class=\"form-control\" />\n");
      out.write("                                <label class=\"form-label\" for=\"bookTitle\">Book Title</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <input type=\"text\" name=\"author\" id=\"author\" class=\"form-control\" />\n");
      out.write("                                <label class=\"form-label\" for=\"author\">Author</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <textarea name=\"bookDesc\" class=\"form-control\" id=\"bookDesc\" rows=\"3\"></textarea>\n");
      out.write("                                <label class=\"form-label\" for=\"bookDesc\">Book Description</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <input type=\"number\" id=\"price\" name=\"price\" class=\"form-control\" />\n");
      out.write("                                <label class=\"form-label\" for=\"price\">Price</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <input type=\"date\" id=\"publishedDate\" name=\"publishedDate\" class=\"form-control\" />\n");
      out.write("                                <label class=\"form-label\" for=\"publishedDate\">Published Date</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"modal-footer\">\n");
      out.write("                                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n");
      out.write("                                <button type=\"submit\" class=\"btn btn-primary\">Save changes</button>\n");
      out.write("                            </div>\n");
      out.write("                        </form>\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("\n");
      out.write("        <!-- Modal for Delete  -->\n");
      out.write("        <div class=\"modal fade\" id=\"exampleModal1\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n");
      out.write("            <div class=\"modal-dialog\">\n");
      out.write("                <div class=\"modal-content\">               \n");
      out.write("                    <div class=\"modal-header\">\n");
      out.write("                        <h5 class=\"modal-title\" id=\"exampleModalLabel1\">Are you sure ?</h5>\n");
      out.write("                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n");
      out.write("                    </div>\n");
      out.write("                    <form id=\"deleteForm\">                            \n");
      out.write("                        <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                            <input type=\"text\" name=\"idb\" id=\"idb\" class=\"form-control\" hidden/>\n");
      out.write("                        </div> \n");
      out.write("                        <div class=\"modal-body\">\n");
      out.write("                            <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\">No</button>\n");
      out.write("                            <button type=\"submit\" class=\"btn btn-success\">Yes</button>\n");
      out.write("                        </div>\n");
      out.write("                    </form>\n");
      out.write("\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("\n");
      out.write("        <!-- model for Adding product -->\n");
      out.write("\n");
      out.write("        <div class=\"modal fade\" id=\"exampleModal2\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n");
      out.write("            <div class=\"modal-dialog\">\n");
      out.write("                <div class=\"modal-content\">\n");
      out.write("                    <div class=\"modal-header\">\n");
      out.write("                        <h5 class=\"modal-title\" id=\"exampleModalLabel2\">Add your Product</h5>\n");
      out.write("                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"modal-body\">\n");
      out.write("                        <form id=\"addForm\">\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <input type=\"text\" name=\"bookTitle\" id=\"bookTitle\" class=\"form-control\" />\n");
      out.write("                                <label class=\"form-label\" for=\"bookTitle\">Book Title</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <input type=\"text\" name=\"author\" id=\"author\" class=\"form-control\" />\n");
      out.write("                                <label class=\"form-label\" for=\"author\">Author</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <textarea name=\"bookDesc\" class=\"form-control\" id=\"bookDesc\" rows=\"3\"></textarea>\n");
      out.write("                                <label class=\"form-label\" for=\"bookDesc\">Book Description</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <input type=\"number\" id=\"price\" name=\"price\" class=\"form-control\" />\n");
      out.write("                                <label class=\"form-label\" for=\"price\">Price</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div data-mdb-input-init class=\"form-outline mb-4\">\n");
      out.write("                                <input type=\"date\" id=\"publishedDate\" name=\"publishedDate\" class=\"form-control\" />\n");
      out.write("                                <label class=\"form-label\" for=\"publishedDate\">Published Date</label>\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"modal-footer\">\n");
      out.write("                                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n");
      out.write("                                <button type=\"submit\" class=\"btn btn-primary\">Save changes</button>\n");
      out.write("                            </div>\n");
      out.write("                        </form>\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("\n");
      out.write("\n");
      out.write("    </body>\n");
      out.write("    <script src=\"https://unpkg.com/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\n");
      out.write("    <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n");
      out.write("    <script src=\"https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js\"></script>\n");
      out.write("    <script>\n");
      out.write("        $(document).ready(function () {\n");
      out.write("            var dataTable = $('#example').DataTable(); // Initialize DataTables once\n");
      out.write("\n");
      out.write("            loadData(); // Call the function to load data initially\n");
      out.write("\n");
      out.write("            // Function to load data using AJAX\n");
      out.write("            function loadData() {\n");
      out.write("                $.ajax({\n");
      out.write("                    url: 'getBookServlet', // URL of your servlet\n");
      out.write("                    type: 'post',\n");
      out.write("                    dataType: 'json',\n");
      out.write("                    success: function (data) {\n");
      out.write("                        // Clear existing table rows\n");
      out.write("                        dataTable.clear().draw();\n");
      out.write("\n");
      out.write("                        // Populate table with new data\n");
      out.write("                        $.each(data, function (index, book) {\n");
      out.write("                            dataTable.row.add([\n");
      out.write("                                book.id,\n");
      out.write("                                book.title,\n");
      out.write("                                book.author,\n");
      out.write("                                book.description,\n");
      out.write("                                book.price,\n");
      out.write("                                book.publishedDate,\n");
      out.write("                                '<div class=\"act\">' +\n");
      out.write("                                        '<a class=\"edit\" title=\"Edit\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\"><i class=\"material-icons\">&#xE254;</i></a>' +\n");
      out.write("                                        '<a class=\"delete\" title=\"Delete\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal1\"><i class=\"material-icons\">&#xE872;</i></a>' +\n");
      out.write("                                        '</div>'\n");
      out.write("                            ]).draw();\n");
      out.write("                        });\n");
      out.write("                    },\n");
      out.write("                    error: function (jqXHR, textStatus, errorThrown) {\n");
      out.write("                        console.log('Error:', errorThrown);\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            // Function to handle click on edit icon\n");
      out.write("            $('#example tbody').on('click', '.edit', function () {\n");
      out.write("                // Get the closest row to the clicked icon\n");
      out.write("                var row = $(this).closest('tr');\n");
      out.write("\n");
      out.write("                // Get the data from the row\n");
      out.write("                var bookID = row.find('td:eq(0)').text();\n");
      out.write("                var bookTitle = row.find('td:eq(1)').text();\n");
      out.write("                var author = row.find('td:eq(2)').text();\n");
      out.write("                var bookDesc = row.find('td:eq(3)').text();\n");
      out.write("                var price = row.find('td:eq(4)').text();\n");
      out.write("                var publishedDateText = row.find('td:eq(5)').text();\n");
      out.write("\n");
      out.write("                // Convert the date format from \"MMM DD, YYYY\" to \"YYYY-MM-DD\"\n");
      out.write("                var publishedDate = formatDate(publishedDateText);\n");
      out.write("\n");
      out.write("                // Set the values in the modal form\n");
      out.write("                $('#bookID').val(bookID);\n");
      out.write("                $('#bookTitle').val(bookTitle);\n");
      out.write("                $('#author').val(author);\n");
      out.write("                $('#bookDesc').val(bookDesc);\n");
      out.write("                $('#price').val(price);\n");
      out.write("                $('#publishedDate').val(publishedDate);\n");
      out.write("\n");
      out.write("                // Open the modal\n");
      out.write("                $('#exampleModal').modal('show');\n");
      out.write("            });\n");
      out.write("\n");
      out.write("            // Function to format the date from \"MMM DD, YYYY\" to \"YYYY-MM-DD\"\n");
      out.write("            function formatDate(dateString) {\n");
      out.write("                var parts = dateString.split(' ');\n");
      out.write("                var month = parts[0];\n");
      out.write("                var day = parts[1].replace(',', '');\n");
      out.write("                var year = parts[2];\n");
      out.write("\n");
      out.write("                // Convert month name to month number\n");
      out.write("                var monthNumber = new Date(Date.parse(month + ' 1, 2000')).getMonth() + 1;\n");
      out.write("\n");
      out.write("                // Ensure day and month are formatted with leading zeros if needed\n");
      out.write("                day = day.padStart(2, '0');\n");
      out.write("                monthNumber = monthNumber.toString().padStart(2, '0');\n");
      out.write("\n");
      out.write("                return year + '-' + monthNumber + '-' + day;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            // Function to handle click on delete icon\n");
      out.write("            $('#example tbody').on('click', '.delete', function () {\n");
      out.write("                // Get the closest row to the clicked icon\n");
      out.write("                var row = $(this).closest('tr');\n");
      out.write("\n");
      out.write("                // Get the data from the row\n");
      out.write("                var bookid = row.find('td:eq(0)').text();\n");
      out.write("\n");
      out.write("                // Set the values in the modal form\n");
      out.write("                $('#idb').val(bookid);\n");
      out.write("                // Open the modal\n");
      out.write("                $('#exampleModal1').modal('show');\n");
      out.write("            });\n");
      out.write("\n");
      out.write("            $('#updateForm').submit(function (event) {\n");
      out.write("                event.preventDefault(); // Prevent default form submission\n");
      out.write("                var formData = $(this).serialize(); // Serialize form data\n");
      out.write("\n");
      out.write("                $.ajax({\n");
      out.write("                    url: 'updateServlet', // URL of your servlet for updating\n");
      out.write("                    type: 'POST',\n");
      out.write("                    data: formData,\n");
      out.write("                    success: function (response) {\n");
      out.write("                        if (response.success) {\n");
      out.write("                            // If update is successful, reload the table data\n");
      out.write("                            loadData();\n");
      out.write("                            $('#exampleModal').modal('hide'); // Hide the modal\n");
      out.write("                        } else {\n");
      out.write("                            console.log('Error:', response.error);\n");
      out.write("                        }\n");
      out.write("                    },\n");
      out.write("                    error: function (jqXHR, textStatus, errorThrown) {\n");
      out.write("                        console.log('Error:', errorThrown);\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("            });\n");
      out.write("            $('#addForm').submit(function (event) {\n");
      out.write("                event.preventDefault(); // Prevent default form submission\n");
      out.write("                var formData = $(this).serialize(); // Serialize form data\n");
      out.write("\n");
      out.write("                $.ajax({\n");
      out.write("                    url: 'addServlet', // URL of your servlet for Adding\n");
      out.write("                    type: 'POST',\n");
      out.write("                    data: formData,\n");
      out.write("                    dataType: 'json', // Expect JSON response\n");
      out.write("                    success: function (response) {\n");
      out.write("                        if (response.success) {\n");
      out.write("                            // If add is successful, reload the table data\n");
      out.write("                            loadData();\n");
      out.write("                            $('#exampleModal2').modal('hide'); // Hide the modal\n");
      out.write("                        } else {\n");
      out.write("                            console.log('Error:', response.error);\n");
      out.write("                        }\n");
      out.write("                    },\n");
      out.write("                    error: function (jqXHR, textStatus, errorThrown) {\n");
      out.write("                        console.log('Error:', errorThrown);\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("            });\n");
      out.write("\n");
      out.write("            $('#deleteForm').submit(function (event) {\n");
      out.write("                event.preventDefault(); // Prevent default form submission\n");
      out.write("                var formData = $(this).serialize(); // Serialize form data\n");
      out.write("\n");
      out.write("                $.ajax({\n");
      out.write("                    url: 'deleteServlet', // URL of your servlet for deletion\n");
      out.write("                    type: 'POST',\n");
      out.write("                    data: formData,\n");
      out.write("                    dataType: 'json', // Expect JSON response\n");
      out.write("                    success: function (response) {\n");
      out.write("                        console.log('Response:', response); // Debugging line\n");
      out.write("                        if (response.success) {\n");
      out.write("                            console.log('Delete successful'); // Debugging line\n");
      out.write("                            loadData();\n");
      out.write("                            $('#exampleModal1').modal('hide'); // Hide the modal\n");
      out.write("                        } else {\n");
      out.write("                            console.log('Error:', response.error);\n");
      out.write("                        }\n");
      out.write("                    },\n");
      out.write("                    error: function (jqXHR, textStatus, errorThrown) {\n");
      out.write("                        console.log('Error:', errorThrown);\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("            });\n");
      out.write("\n");
      out.write("\n");
      out.write("        });\n");
      out.write("\n");
      out.write("    </script>\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("</html>\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
